name: Lighthouse CI

on:
  workflow_call:
    inputs:
      os:
        required: true
        type: string
      host-url:
        required: true
        type: string
jobs:
  lighthouse:
    runs-on: ${{ inputs.os }}
    steps:
      - uses: actions/checkout@v3
      - name: Audit URLs using Lighthouse
        uses: treosh/lighthouse-ci-action@v10
        with:
          urls: ${{ inputs.host-url }}
          configPath: ./.github/lighthouserc.js
          uploadArtifacts: true # save results as an action artifacts
          temporaryPublicStorage: true # upload lighthouse report to the temporary storage