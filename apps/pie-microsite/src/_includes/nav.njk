{# Each navigation item has a unique key that is mapped to an Icon name #}
{# TODO - using temporary random icons for now #}
{% set navigationIcons = {
    Accessibility: 'TechnologySmall',
    'All about PIE': 'food',
    Components: 'filters',
    Copy: 'copy',
    Foundations: 'moon',
    'Getting started': 'order',
    Patterns: 'basket',
    Resources: 'Vegan',
    Support: 'User'
} %}

<nav class="c-nav">
    {% set navPages = collections.all | eleventyNavigation("Pages") %}
    <ul>
        {% for category in navPages %}
            <li>
                <details {% if page.url.includes(category.url) %} open{% endif %}>
                    <summary>
                        {{ { name: navigationIcons[category.key], attrs: { fill: 'orange', height: '32', width: '32' } } | pieIconsSvg | safe }}
                        {{ category.title }}
                        {{ { name: 'CaretUpSmall', attrs: { fill: 'orange', height: '32', width: '32', class:'c-nav-toggle c-nav-toggle--close' } } | pieIconsSvg | safe }}
                        {{ { name: 'CaretDownSmall', attrs: { fill: 'orange', height: '32', width: '32', class:'c-nav-toggle c-nav-toggle--open' } } | pieIconsSvg | safe }}
                    </summary>
                    {% if category.children.length %}
                        <ul>
                            {% for subpage in category.children %}
                            <li>
                                <a
                                    href="{{ subpage.url }}" 
                                    {% if subpage.url == page.url %} class="c-nav-item--active"{% endif %}>
                                    {{ subpage.title }}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </details>
            </li>
        {% endfor %}
    </ul>
</nav>
